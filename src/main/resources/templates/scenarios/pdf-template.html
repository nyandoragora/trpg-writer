<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title th:text="${scenario.title}"></title>
    <link rel="stylesheet" type="text/css" href="css/pdf-style.css" />
</head>
<body>
    <h1 class="scenario-title" th:text="${scenario.title}"></h1>
    <p class="scenario-description" th:text="${scenario.introduction}"></p>

    <div th:each="scene : ${scenes}" class="scene">
        <h2 class="scene-title" th:text="${scene.title}"></h2>
        <div class="scene-content" th:utext="${scene.content}"></div>

        <!-- GM Info Section -->
        <div th:if="${scene.gmInfo != null and !scene.gmInfo.isEmpty()}" class="gm-info">
            <h4>GM向け情報</h4>
            <p th:text="${scene.gmInfo}"></p>
        </div>

        <!-- Scene Infos Section -->
        <div th:if="${sceneInfosMap.containsKey(scene.id) and !sceneInfosMap.get(scene.id).isEmpty()}" class="scene-info-section">
            <h4>シーン内情報</h4>
            <div th:each="info : ${sceneInfosMap.get(scene.id)}" class="info-card">
                <h5 class="info-title" th:text="${info.name}"></h5>
                <p class="info-content" th:text="${info.content}"></p>
            </div>
        </div>
    </div>

    <!-- Info Summary Page -->
    <div th:if="${allSceneInfos != null and !allSceneInfos.isEmpty()}" class="info-summary-page">
        <h2 class="summary-title">情報一覧</h2>
        <div th:each="sceneInfo : ${allSceneInfos}" class="summary-item">
            <h4 class="summary-info-title" th:text="${sceneInfo.info.name}"></h4>
            <p class="summary-info-content" th:text="${sceneInfo.info.content}"></p>
            <p class="summary-scene-ref">（登場シーン： <span th:text="${sceneInfo.scene.title}"></span>）</p>
        </div>
    </div>

    <!-- Handout Page -->
    <div th:if="${allSceneInfos != null and !allSceneInfos.isEmpty()}" class="handout-page">
        <h2 class="summary-title">配布資料</h2>
        <div class="handout-container">
            <div th:each="sceneInfo : ${allSceneInfos}" class="handout-card">
                <div class="handout-header" th:text="${sceneInfo.info.name}"></div>
                <div class="handout-body" th:text="${sceneInfo.info.content}"></div>
            </div>
        </div>
    </div>
</body>
</html>
